"use strict";import{saveItem,loadItem}from"../../resources/localStorage.min.js";let api=loadItem("logsAPI"),regionegion=loadItem("logsRegion","CN"),server=loadItem("logsServer","海猫茶屋"),zone=loadItem("logsZone","38"),time=loadItem("logsTime",5),characterName="",metric="dps",timeframe="historical";$("#api").val(api),!api&&$("#readMe").children("p:eq(1)").append($('<a href="https://cn.fflogs.com/profile">获取API Key</a>')),$("#server").val(server),$("#region").val(regionegion),$("#zone").val(zone),$("#time").val(time),$("#save").on("click",()=>{api=$("#api").val(),server=$("#server").val(),time=$("#time").val(),saveItem("logsAPI",api),saveItem("logsServer",server),saveItem("logsTime",time)}),$("#submit").on("click",()=>{api?$.ajax({type:"GET",cache:!1,dataType:"json",url:`https://www.fflogs.com/v1/rankings/character/${encodeURIComponent($("#test-id").val())}/${encodeURIComponent($("#test-server").val())}/${regionegion}?zone=${zone}&metric=${metric}&timeframe=${timeframe}&api_key=${api}`,success:e=>{console.log(e);for(let o=0;o<e.length;o++){const a=e[o];a.encounterID}},timeout:5e3,error:e=>{}}):console.log("未填写API Key")});